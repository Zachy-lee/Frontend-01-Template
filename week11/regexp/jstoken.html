<style>
    .keywords {
        color: blue;
    }
    
    .punctuator {
        color: blueviolet;
    }
    
    .indentifier {
        color: skyblue;
    }
</style>
<pre id="container"></pre>
<script>
    let source = `
    function sleep(t) {
            return new Promise((resolve, reject) => {
                setTimeout(resolve, t)
            })
    }
`

    let regexp = /(function|new|return)|([ \t\n\r]+)|([a-zA-Z][a-zA-Z0-9]*)|([\(\)\{\}\,\;])/g

    var dictionary = ['keywords', 'whitespace', 'indentifier', 'punctuator'];
    var token = null;
    var lastIndex = 0;
    var container = document.getElementById('container')
    do {
        lastIndex = regexp.lastIndex;
        token = regexp.exec(source);
        if (!token) break;
        let text = document.createElement('span');
        text.textContent = token[0]
        console.log(regexp.lastIndex);
        for (let i = 1; i < 5; i++) {
            if (token[i]) {
                text.classList.add(dictionary[i - 1])
            }
        }
        container.appendChild(text)
    } while (token);
</script>